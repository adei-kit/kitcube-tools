<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>kitcube-tools: Hardware Access Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">kitcube-tools
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Hardware Access Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><pre class="fragment">Contents:
- @ref fdhwlib_intro
- @ref fdhwlib_usage
- @ref fdhwlib_dirs
- @ref fdhwlib_build
- @ref fdhwlib_version
</pre><h1><a class="anchor" id="fdhwlib_intro"></a>
Introduction</h1>
<p>This document contains a description of the hardware access library for the Pierre Auger Fluoresence Detector Electronic (FE) other experiments. The library provides (nearly) the same functionality for Linux and Windows and Apple operating system.</p>
<p>The library is divided in three layers:</p>
<ul>
<li>api This layer provides the interface to the for the application programms. The function of this layer are rather independent from the realization of the hardware.</li>
<li>The register model layer implements the address model of the hardware. Changes in the hardware structure will also cause changes in this layer. This means also that for the different experiments own register models exist. Implemented are:<ul>
<li>basehw</li>
<li>hw</li>
<li>katrinhw</li>
</ul>
</li>
<li>pbus This layer provides the interface to the hardware via the Pbus protocol (simple VME bus type).</li>
</ul>
<p>Included in the package are some more general utility functions:</p>
<ul>
<li><a class="el" href="group__akutil__group.html">Utility functions + classes</a><ul>
<li><a class="el" href="timesync.html">Relation between PC clock and GPS time</a></li>
</ul>
</li>
<li>simpleshell</li>
<li>calib_group</li>
<li>ts_group<ul>
<li>bgformat</li>
<li>fddaswin</li>
</ul>
</li>
<li><a class="el" href="classgps.html">gps</a><ul>
<li>gps_remote</li>
<li>gps_conf</li>
</ul>
</li>
</ul>
<pre class="fragment">Dependancies of the libraries in the package
</pre><pre class="fragment">   akutil
  
   akshell -- akutil
  
   
   calib -- Hw -- Pbus\&lt;AccessType\&gt; -- akutil
  
   am_testutil -- Hw -- Pbus\&lt;AccessType\&gt; -- akutil
  
   FEdata --Hw --Pbus\&lt;AccessType\&gt; -- akutil
    
  
   FE -- Hw -- Pbus\&lt;AccessType\&gt; -- akutil
  
   Hw -- Pbus\&lt;AccessType\&gt; -- akutil
   
   Pbus\&lt;AccessType\&gt; -- akutil </pre><h1><a class="anchor" id="fdhwlib_usage"></a>
Usage</h1>
<p>Projects using the hardware access library need to add the directory fdhwlib/fdhwlib to their include path.</p>
<p>Example (Auger API): </p>
<pre class="fragment">#include &lt;FE/FE.h&gt;

main(){

  FE fe;
  FE fe.config.init();
  ...

}
</pre><p> Linking the project it is necessary to add the hardware access library and Pbus library.</p>
<p>Example (Katrin Register Model): </p>
<pre class="fragment">#include &lt;katrinhw/kasubrack.h&gt;

main(){

   KaSubrack *s;
   s = new KaSubrack(katrin.ini);
   ...
}  
</pre><h1><a class="anchor" id="fdhwlib_dirs"></a>
Directory Structure</h1>
<p>The directory fdhwlib contains project file for Kdevelop/Linux and MS Visual C++/MS Windows to create the approritate version of the library. The sources for the different layers can be found in the directories fdhwlib/FE, fdhwlib/Hw and fdhwlib/Pbus. Some more general utilities will be found in fdhwlib/akutil. The definition of the KATRIN hardware model is based on the same generic classes used in the Auger register model. All KATRIN specific classes can be found in fdhwlib/katrinhw</p>
<p>The documentation generated can be found in the directory fdhwlib-api. It is available in html and latex format.</p>
<h1><a class="anchor" id="fdhwlib_build"></a>
Compilation of the libraries</h1>
<h2><a class="anchor" id="buildlinux"></a>
Linux</h2>
<p>To compile and install the library use the commands </p>
<pre class="fragment">./configure
./makeAll
./makeAll daq
./make doc
./makeInstall
./makeInstall daq
</pre><p> Without the argument "daq" no fd-das or ROOT support is required. For most applications it may be sufficient to omit creating the fd-daq dependant part of the package.</p>
<p>The package requires some external packages. These are Root, fd-das and the microEnable drivers. Use the environment variable CPLUS_INCLUDE_PATH to specify the path to the header files. E.g. use </p>
<pre class="fragment">CPLUS_INCLUDE_PATH=/usr/software/fdhwlib/include:
       /home/kopmann/FD-das/include:/home/kopmann/FD-das/mirror/include:
       /cern/root/include:/usr/src/menable/include:/usr/lib/qwt/include:
</pre> <pre class="fragment">To install the package it is necessary to have write
access to the install directory /usr/software.
</pre><h2><a class="anchor" id="buildwindows"></a>
Windows</h2>
<p>For all libraries a MSVC project exists. Use these to compile a separate library.</p>
<p>To generate all libraries use the script fdhwlib/makeAll.bat. The script accepts two additional arguments to generate the menable and daq dependant parts of the library. For these libraies it is required to specify the location of the required packages (menable + daq + root) in the INCLUDE environment variable. The path of the root libraries has to be added to to the LIB environment variable.</p>
<pre class="fragment">makeAll                  Generate the standard libraries
makeAll menable          Generate menable depandant part
makeAll daq              Generate daq dependant part
</pre> <pre class="fragment">To use the libraries add the directory fdhwlib/fdhwlib to the include
path and all required fdhwlib/fdhwlib/\&lt;subdir\&gt;/debug directories
(e.g. fdhwlib/fdhwlib/Hw/debug) to the library path.
</pre><h2><a class="anchor" id="builddoc"></a>
Documentation</h2>
<p>The documentation can be automatically generated from the header files using doxygen (or other programs handling javadoc type comments).</p>
<p>Using "make doc" will generate documentation for all packages.</p>
<h2><a class="anchor" id="buildinternals"></a>
Build system internals</h2>
<p>The packages uses the standard build system of the kdevelp IDE and MSVC where this is possible and sufficient. However in some case it turned out to be adequate to provide additional scripts. The scripts are named on both platforms as "makeAll" and "makeInstall". The scripts will accept additional arguments ("daq", "meanble") to create microenable or DAQ dependant parts of the package.</p>
<p>Central with kdevelop are the files Makefile.am in every directory of the projects. The configure step will generate from this file the required Makefiles. Some manual work has to be done in the scripts to activate all make options and to install some parts that are not installed automatically.</p>
<p>In MSVC the information of the build process is hidden in the DSP project files. It is possble to generate makefiles (extension MAK) for Microsofts nmake program. The redundand MAK files allow to build the whole project automatically from the command line and to control the make process by script files.</p>
<h1><a class="anchor" id="fdhwlib_version"></a>
Remark on version numbers</h1>
<pre class="fragment">There are several version numbers used in the package
fdhwlib. First comes the overall version of the package
It can be found in the files fdhwlib.h config.h (only in the
development version, not included in the tar-ball!) somewhere
in the kdevelop project file and in the doxygen configuration.
The project file will automatically update config.h but not
the other places. This has to be done manually. All files
should show the same version number.

There are other version numbers that are hardware related.
The purpose of these numbers is to keep the library compatible
with older versions of the hardware design. The version numbers
are used in this case for conditional comiplation.
(PBUS_VER, FLT_VER and FLT_VER).</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 8 2014 18:31:15 for kitcube-tools by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
